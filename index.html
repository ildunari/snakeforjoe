<!DOCTYPE html>
<html>
<head>
  <title>Snake Game</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
    }
    body {
      background: black;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    canvas {
      border: 1px solid white;
    }
    .arrow {
      position: absolute;
      width: 80px;
      height: 80px;
      background-color: rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .arrow:hover {
      background-color: rgba(255, 255, 255, 0.5);
    }
    #arrow-up {
      top: 20px;
      left: calc(50% - 40px);
    }
    #arrow-down {
      bottom: 20px;
      left: calc(50% - 40px);
    }
    #arrow-left {
      top: calc(50% - 40px);
      left: 20px;
    }
    #arrow-right {
      top: calc(50% - 40px);
      right: 20px;
    }
  </style>
</head>
<body>
  <canvas width="400" height="400" id="game"></canvas>
  <div id="arrow-up" class="arrow">↑</div>
  <div id="arrow-down" class="arrow">↓</div>
  <div id="arrow-left" class="arrow">←</div>
  <div id="arrow-right" class="arrow">→</div>
  <script>
    var canvas = document.getElementById('game');
    var context = canvas.getContext('2d');
    var grid = 16;
    var count = 0;
    var speed = 6;
    var snake = {
      x: 160,
      y: 160,
      dx: grid,
      dy: 0,
      cells: [],
      maxCells: 4
    };
    var apple = {
      x: 320,
      y: 320
    };

    // Rest of the code...

    // Touch event handling
    var touchStartX = 0;
    var touchStartY = 0;
    var touchEndX = 0;
    var touchEndY = 0;

    function handleTouchStart(e) {
      touchStartX = e.touches[0].clientX;
      touchStartY = e.touches[0].clientY;
    }

    function handleTouchMove(e) {
      e.preventDefault();
      touchEndX = e.touches[0].clientX;
      touchEndY = e.touches[0].clientY;
    }

    function handleTouchEnd() {
      var dx = touchEndX - touchStartX;
      var dy = touchEndY - touchStartY;
      var absDX = Math.abs(dx);
      var absDY = Math.abs(dy);

      if (absDX > absDY && absDX > 30) {
        if (dx > 0 && snake.dx === 0) {
          snake.dx = grid;
          snake.dy = 0;
        } else if (dx <        0 && snake.dx === 0) {
          snake.dx = -grid;
          snake.dy = 0;
        }
      } else if (absDY > absDX && absDY > 30) {
        if (dy > 0 && snake.dy === 0) {
          snake.dy = grid;
          snake.dx = 0;
        } else if (dy < 0 && snake.dy === 0) {
          snake.dy = -grid;
          snake.dx = 0;
        }
      }
    }

    // Add touch event listeners
    document.addEventListener('touchstart', handleTouchStart);
    document.addEventListener('touchmove', handleTouchMove);
    document.addEventListener('touchend', handleTouchEnd);

    // Rest of the code...
  </script>
</body>
</html>

